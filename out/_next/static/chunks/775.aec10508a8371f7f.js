(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[775],{3764:(e,t,r)=>{"use strict";r.d(t,{Im:()=>l,VD:()=>o,ZA:()=>u,dY:()=>f,hf:()=>m,i6:()=>p});var n=r(4796),a=r(2179),s=r(307);n.l2R.enabled=!0;let i=new a.Z,c=new s.B;i.setDecoderPath("/draco/"),c.setDRACOLoader(i);let u=c,o=new n.Tap,l=e=>{e?.traverse(e=>{if(e.isMesh)if(e.geometry.dispose(),e.material.isMaterial)d(e.material);else for(let t of e.material)d(t)})},d=e=>{for(let t of(e.dispose(),Object.keys(e))){let r=e[t];r&&"object"==typeof r&&"minFilter"in r&&(r.dispose(),r.source?.data?.close?.())}},f=e=>{e.dispose(),e=null},p=e=>{for(let t of e)t.parent.remove(t)},m=(e,t)=>{let r;return t.traverse(t=>{t.name===e&&(r=t)}),r}},4096:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Earth:()=>F,EarthSection:()=>O});var n=r(7876);let a=r.p+"static/media/earth.510551ea.glb",s=r.p+"static/media/milkyway-nx.0e972b21.hdr",i=r.p+"static/media/milkyway-ny.006459f3.hdr",c=r.p+"static/media/milkyway-nz.5f35d5a4.hdr",u=r.p+"static/media/milkyway-px.2922755b.hdr",o=r.p+"static/media/milkyway-py.7aeec30d.hdr",l=r.p+"static/media/milkyway-pz.0ef64b21.hdr";var d=r(5232),f=r(8842),p=r(5215),m=r(3650),h=r(7689),y=r(478),w=r(9574),v=r(4232),x=r(7485),b=r(2475),g=r(4796),E=r(9499),_=r(8473),k=r(3764),z=r(6794),C=r.n(z);let R={x:0,y:0,z:2},A=(e,t,r)=>e+r*(t-e),j=e=>Object.keys(e).map(t=>parseFloat(Math.round(100*e[t])/100).toFixed(2)).join(", "),N=e=>e&&e.camera?{x:e.camera[0],y:e.camera[1],z:e.camera[2]}:R,P={stiffness:80,damping:40,mass:2,restSpeed:.001,restDelta:.001},S={stiffness:40,damping:30,mass:2,restSpeed:.001,restDelta:.001},L={stiffness:40,damping:30},M=(0,v.createContext)({}),F=({position:e=[0,0,0],scale:t=1,hideMeshes:r=[],labels:z=[],className:F,children:O})=>{let[q,T]=(0,v.useState)(!1),[D,I]=(0,v.useState)(!1),[Y,Z]=(0,v.useState)(!1),[J,B]=(0,v.useState)(!1),G=(0,v.useRef)([]),H=(0,v.useRef)(),Q=(0,v.useRef)(),U=(0,v.useRef)(),V=(0,v.useRef)(),W=(0,v.useRef)(),$=(0,v.useRef)(),X=(0,v.useRef)(),K=(0,v.useRef)(),ee=(0,v.useRef)(),et=(0,v.useRef)(),er=(0,v.useRef)(),en=(0,v.useRef)(),ea=(0,w.B4)(U),es=(0,v.useRef)(),ei=(0,v.useRef)(N(G.current[0])),ec=(0,v.useRef)([]),eu=(0,v.useRef)(),eo=(0,v.useRef)(),el=(0,v.useRef)(),ed=(0,v.useRef)(),{width:ef,height:ep}=(0,w.lW)(),em=(0,h.I)(),eh=(0,y.z)(0,P),ey=(0,y.z)(0,P),ew=(0,y.z)(0,P),ev=(0,y.z)(0,S),ex=(0,y.z)(0,S),eb=(0,y.z)(0,S),eg=(0,y.z)(0,L),eE=(0,v.useCallback)(()=>{if(!ea)return void cancelAnimationFrame(es.current);es.current=requestAnimationFrame(eE);let e=X.current.getDelta();en.current.update(e),eu.current.update(),W.current.render(V.current,$.current),ec.current.forEach(e=>{let{element:t,position:r,sprite:n}=e,a=new g.Pq0(...r),s=$.current.position.distanceTo(et.current.position),i=$.current.position.distanceTo(n.position);a.project($.current),a.x=Math.round((.5+a.x/2)*window.innerWidth),a.y=Math.round((.5-a.y/2)*window.innerHeight),t.style.setProperty("--posX",(0,_.gY)(a.x)),t.style.setProperty("--posY",(0,_.gY)(a.y)),i>s?t.dataset.occluded=!0:t.dataset.occluded=!1})},[ea]);(0,v.useEffect)(()=>{ed.current=!0;let{innerWidth:e,innerHeight:t}=window;W.current=new g.JeP({canvas:U.current,antialias:!1,alpha:!0,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!0}),W.current.setPixelRatio(1),W.current.outputEncoding=g.S2Q,W.current.physicallyCorrectLights=!0,W.current.toneMapping=g.FV,$.current=new g.ubm(54,e/t,.1,100),$.current.position.x=ei.current.x,$.current.position.y=ei.current.y,$.current.position.z=ei.current.z,$.current.lookAt(0,0,0),eh.set($.current.position.x,!1),ey.set($.current.position.y,!1),ew.set($.current.position.z,!1),V.current=new g.Z58,X.current=new g.zD7,ee.current=new g.tBo;let r=new g.$p8(2236962,.05),n=new g.ZyN(0xffffff,1.5);n.position.set(3,0,1);let a=[r,n];return a.forEach(e=>V.current.add(e)),eu.current=new x.N($.current,U.current),eu.current.enableZoom=!1,eu.current.enablePan=!1,eu.current.enableDamping=!1,eu.current.rotateSpeed=.5,()=>{ed.current=!1,cancelAnimationFrame(es.current),(0,k.i6)(a),(0,k.Im)(V.current),(0,k.dY)(W.current)}},[]),(0,v.useEffect)(()=>{let e=()=>{I(!0),eh.stop(),ey.stop(),ew.stop()},t=()=>{eh.set($.current.position.x,!1),ey.set($.current.position.y,!1),ew.set($.current.position.z,!1),I(!1)};return eu.current.addEventListener("start",e),eu.current.addEventListener("end",t),()=>{eu.current.removeEventListener("start",e),eu.current.removeEventListener("end",t)}},[eh,ey,ew]),(0,v.useEffect)(()=>{if(!q)return;let e=(0,k.hf)("Chunk",et.current),t=(0,k.hf)("Atmosphere",et.current),r=(e,t)=>{$.current.position[e]=t},n=eh.onChange(e=>r("x",e)),a=ey.onChange(e=>r("y",e)),s=ew.onChange(e=>r("z",e)),i=(t,r)=>{e.position[t]=r},c=ev.onChange(e=>i("x",e)),u=ex.onChange(e=>i("y",e)),o=eb.onChange(e=>i("z",e)),l=eg.onChange(e=>{t.material.opacity=e});return()=>{n(),a(),s(),c(),u(),o(),l()}},[eh,ey,ew,ev,ex,eb,q,eg]),(0,v.useEffect)(()=>{ef<=_.$_.tablet&&(eu.current.enabled=!1)},[ef]),(0,v.useEffect)(()=>{if(q)return;let r=new b.U,n=new g.BdL(W.current);n.compileCubemapShader();let d=async()=>{let r=await k.ZA.loadAsync(a);et.current=r.scene,er.current=r.animations,en.current=new g.Iw4(et.current),en.current.timeScale=.1,et.current.traverse(async e=>{let{material:t,name:r}=e;"Atmosphere"===r&&(t.alphaMap=t.map),t&&await W.current.initTexture(t)}),et.current.position.x=e[0],et.current.position.y=e[1],et.current.position.z=e[2],et.current.scale.x=t,et.current.scale.y=t,et.current.scale.z=t},f=async()=>{let e=await r.loadAsync([s,i,c,u,o,l]);e.magFilter=g.k6q,eo.current=n.fromCubemap(e),n.dispose(),await W.current.initTexture(eo.current.texture)},p=async()=>{let e=await k.VD.loadAsync("/_next/static/media/milkyway.dfc91e8e.jpg");e.mapping=g.wfO,e.encoding=g.S2Q,V.current.background=e,await W.current.initTexture(e)},m=async()=>{await Promise.all([p(),f(),d()]),et.current.traverse(({material:e})=>{e&&(e.envMap=eo.current.texture,e.needsUpdate=!0)}),ed.current&&T(!0)};(0,v.startTransition)(()=>{m(),setTimeout(()=>{B(!0)},1e3)})},[q,e,t]),(0,v.useEffect)(()=>(q&&!el.current&&(V.current.add(et.current),el.current=!0),q&&ea&&(Z(!0),eE()),()=>{cancelAnimationFrame(es.current)}),[eE,ea,q]),(0,v.useEffect)(()=>{q&&(Q.current.innerHTML="",ec.current=z.map(e=>{let t=document.createElement("div");t.classList.add(C().label),t.dataset.hidden=!0,t.style.setProperty("--delay",`${e.delay||0}ms`),t.textContent=e.text,Q.current.appendChild(t);let r=new g.kxk;return r.position.set(...e.position),r.scale.set(60,60,1),{element:t,...e,sprite:r}}))},[z,q]),(0,v.useEffect)(()=>{W.current.setSize(ef,ep),$.current.aspect=ef/ep,$.current.updateProjectionMatrix()},[ef,ep]),(0,v.useEffect)(()=>{let e=U.current,t=e=>{let{innerWidth:t,innerHeight:r}=window;console.info({cameraPosition:j($.current.position)}),K.current=new g.I9Y(e.clientX/t*2-1,-(2*(e.clientY/r))+1),ee.current.setFromCamera(K.current,$.current);let n=ee.current.intersectObjects(V.current.children,!0);n.length>0&&console.info({clickPosition:j(n[0].point)})};return()=>{e.removeEventListener("click",t)}},[]);let e_=(0,v.useCallback)(()=>{let e;if(!H.current)return;let{offsetTop:t}=H.current,{innerHeight:n}=window,a=window.scrollY-t;requestAnimationFrame(()=>{let t=G.current.length-1,s=Math.floor(a/n),i=(0,E.q)(s,0,t),c=G.current[i],u=G.current[i+1],o=N(c)||R,l=N(u)||R,d=(0,E.q)((a-n*i)/n,0,1),f=A(o.x,l.x,d),p=A(o.y,l.y,d),m=A(o.z,l.z,d);if(e!==o&&G.current.length&&c){let e,t;e=G.current[i].meshes,et.current.traverse(t=>{let{name:n}=t,a=(0,k.hf)("Chunk",et.current),s=e?.includes(n),i=r?.includes(n);if(s)if("Atmosphere"===n)t.visible=!0,eg.set(1);else if("Chunk"===n){let e=new g.Pq0(-.4,.4,.4);t.visible=!0,em?t.position.set(...e.toArray()):(ev.set(e.x),ex.set(e.y),eb.set(e.z))}else"EarthFull"===n&&a.visible?t.visible=!1:t.visible=!0;else if(i&&!s)if("Atmosphere"===n)eg.set(0);else if("Chunk"===n){var c;let e,r=new g.Pq0(0,0,0);c=a.position,(e=(e=0)=>Math.round((e+Number.EPSILON)*100)/100)(r?.x)===e(c?.x)&&e(r?.y)===e(c?.y)&&e(r?.z)===e(c?.z)&&(t.visible=!1),ev.set(r.x),ex.set(r.y),eb.set(r.z)}else"EarthPartial"===n&&a.visible?t.visible=!0:t.visible=!1}),t=G.current[i].animations,!em&&(er.current.forEach((e,r)=>{t.find(e=>e.includes(r.toString()))||en.current.clipAction(e).reset().stop()}),er.current.length&&G.current[i].animations&&t.forEach(e=>{let t=e.split(":"),r=er.current[Number(t[0])],n=en.current.clipAction(r);t[1]&&"loop"===t[1]||(n.clampWhenFinished=!0,n.loop=g.G3T),n.play()})),ec.current.forEach(e=>{e.hidden&&(e.element.dataset.hidden=!0,e.element.setAttribute("aria-hidden",!0))}),G.current[i].labels.forEach(e=>{ec.current.filter(t=>t.text===e).forEach(e=>{e.element.dataset.hidden=!1,e.element.setAttribute("aria-hidden",!1)})})}if(e=o,!D){if(em)return void $.current.position.set(f,p,m);eh.set(f),ey.set(p),ew.set(m)}})},[eh,ey,ew,ev,ex,eb,D,r,eg,em]);(0,v.useEffect)(()=>{let e,t=(e=0,function(...t){let r=new Date;r-e>=100&&(e_(...t),e=r)});return q&&ea&&window.addEventListener("scroll",t),()=>{window.removeEventListener("scroll",t)}},[e_,ea,q,eg]);let ek=(0,v.useCallback)(e=>{G.current=[...G.current,e]},[]),ez=(0,v.useCallback)(e=>{G.current=G.current.filter(t=>t!==e)},[]);return(0,n.jsx)(M.Provider,{value:{registerSection:ek,unregisterSection:ez},children:(0,n.jsxs)("div",{className:(0,_.Ly)(C().earth,F),ref:H,children:[(0,n.jsxs)("div",{className:C().viewport,children:[(0,n.jsx)("canvas",{className:C().canvas,"data-visible":q&&Y,"data-grabbing":D,ref:U}),(0,n.jsx)("div",{className:C().labels,"aria-live":"polite",ref:Q}),(0,n.jsx)("div",{className:C().vignette})]}),(0,n.jsx)("div",{className:C().sections,children:O}),(0,n.jsx)(m.e,{unmount:!0,in:!q&&J,timeout:(0,_.IT)(p.L.base.durationL),children:e=>(0,n.jsx)(f.w,{className:C().loader,"data-visible":e,children:(0,n.jsx)(d.a,{})})})]})})},O=(0,v.memo)(({children:e,scrim:t,scrimReverse:r,className:a,camera:s=[0,0,0],animations:i=[],meshes:c=[],labels:u=[]})=>{let{registerSection:o,unregisterSection:l}=(0,v.useContext)(M),d=(0,v.useRef)(),f=JSON.stringify(i)+JSON.stringify(s)+JSON.stringify(u)+JSON.stringify(c);return(0,v.useEffect)(()=>{let e={camera:s,animations:i,meshes:c,labels:u,sectionRef:d};return o(e),()=>{l(e)}},[f,o,l]),(0,n.jsx)("div",{className:(0,_.Ly)(C().section,a),"data-scrim":t,"data-scrim-reverse":r,ref:d,children:e})})},6794:e=>{e.exports={earth:"Earth_earth__i2n_8",loader:"Earth_loader__mFQg_",viewport:"Earth_viewport__gL6rd",canvas:"Earth_canvas__sNRHU",labels:"Earth_labels__qAf2O",label:"Earth_label__qJpkp",vignette:"Earth_vignette__5KFZA",sections:"Earth_sections___4G_0",section:"Earth_section__3eGzO"}},9499:(e,t,r)=>{"use strict";r.d(t,{q:()=>n});let n=(e,t,r)=>r?Math.min(e,t)===e?t:Math.max(e,r)===e?r:e:Math.max(e,t)===t?e:t}}]);